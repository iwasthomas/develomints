<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="qna">
	<insert id="insertCounselNonQna" parameterType="nq">
		INSERT INTO NON_MEMBER_QNA VALUES(NON_QNA_SEQ.NEXTVAL,#{category },#{email},#{qnaPw} ,#{qnaTitle},#{qnaContent},to_char(sysdate,'yyyy-mm-dd'),'','')
	</insert>
	<insert id="insertCountQna" parameterType="q">
		insert into qna values
		(QNA_SEQ.NEXTVAL, #{memberId},
		#{category},#{qnaTitle},#{qnaContent},to_char(sysdate,'yyyy-mm-dd'),'','','','')
		<selectKey resultType="_int" order="AFTER" keyProperty="qnaNo">
			select max("qna_no") from qna
		</selectKey>
	</insert>
	<insert id="insertFile" parameterType="pfv">
		insert into attachment values(atm_seq.nextval,#{memberNo}, 6,#{boardNo}, #{fileName}, #{filePath})
	</insert>
	<select id="counselList">
		select "qna_no"as qnaNo,
		    "member_id"as memberId,
		    "category"as category,
		    "qna_title"as qnaTitle,
		    "qna_content"as qnaContent,
		    "reg_date"as regDate,
		    "filename"as filename,
		    "filepath"as filepath,
		    "qna_answer" as qnsAnswer,
		    "answer_date"as answerDate
		from qna order by 1 desc;
	</select>
</mapper>
